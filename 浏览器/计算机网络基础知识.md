### TCP建立连接的三次握手过程

1. Client将同步标志为 SYN 置为1，随机选取序列号**seq=x**, Client发出连接请求，进入**SYN-SENT**状态。
2. Server收到请求后，由标志位**SYN=1**得知Client请求连接，Server 将 标志位**SYN**和**ACK**置为1 ，**ack=x+1**，产生序列号**seq=y**, 发给Client确认连接请求，进入**SYN-RCVD**状态，此时操作系统为TCP连接分配TCP缓存和变量。
3. Client收到确认消息后，检查序列号**seq**是否等于**x+1**，**ACK **是否为1 ，正确则将 **ACK** 标志位置为1 ，**ack = y+1** ，并且此时操作系统为该 TCP 连接分配 TCP 缓存和变量，发送给 Server，Server 检查 **ack **是否为 **y + 1**，**ACK **是否为 1，如果正确则连接建立成功，Client 和 Server 进入 确认连接状态，完成三次握手

> - 不要将确认序号ack与标志位中的ACK搞混了。
> - 确认方ack=发起方req+1，两端配对。

### 四次挥手

1. client 应用进程向TCP发出连续释放报文段，终止数据发送，主动关闭TCP，将**终止控制位 FIN置为1**，

   产生一个序号 **seq =u** ，进入 **FIN-WAIT-1(终止等待 1)状态**

2. Server收到连续释放报文段，发出确认报文段，**确认标志ACK=1,确认号ack=u+1,产生一个序列号 seq=v** 进入 **CLOSE—WAIT(关闭状态)** 状态。此时client端到server端方向的链接就释放掉了。这时TCP处于**半关闭状态**。client端处于**FIN-WAIT-2（终止等待2）**状态，等待server 发送释放报文段。

3. Server 发出连续释放报文段，**终止控制位 FIN置为1**，**ACK=1,假定client序列号seq=w** , **由于在半关闭状态下，server可能又发送过一些数据，所以必须重复上次发送过得确认号ack=u+1** , 此时Server**（Lsat-ACK）处于最后确认状态**，等待Client确认。

4. Client收到连续释放报文段后，发出确认释放报文段，**将确认标志位ACK=1，确认号ack=w+1，自己的序号为seq=u+1,** Client处于(**TIME-WAIT)时间等待状态**，此时TCP未释放掉，需要经过时间等待计时器设置的时间2MSL**（MSL：报文最大生存时间）**后，Client进入关闭状态。

> **为什么需要经过2MSL(最大报文段生存时间)才能进入关闭状态？**
>
> 如果Client发送的确认释放连接信息Server没有收到，这时候Server会再次发送一个释放连接请求，而这个时候Client还处于等待状态的话，还可以再次发送确认信息

### cdn原理

**CDN的全称是Content Delivery Network，即内容分发网络**。

CDN的基本原理：是广泛采用各种缓存服务器，将这些缓存服务器分布到用户访问相对集中的地区或网络中，在用户访问网站时，利用全局负载技术将用户的访问指向距离最近的工作正常的缓存服务器上，由缓存服务器直接响

全局负载技术：就是指将整个网络范围内用户的请求定向到最近的节点。

### 请求方法head特性

1. 只请求资源的首部，

2. 检查超链接的有效性

3. 检查网页是否被修改

4. 用于自动搜索机器人获取网页的标志信息，获取rss种子信息，或者传递安全认证信息等

### OSI七层模型

应用层：文件传输，常用协议HTTP，snmp,FTP ,

表示层：数据格式化，代码转换，数据加密，

会话层：建立，解除会话

传输层：提供端对端的接口，tcp,udp

网络层：为数据包选择路由，IP，icmp

数据链路层：传输有地址的帧

物理层：二进制的数据形式在物理媒体上传输数据

### TCP/IP的网络模型

1. TCP/IP模型是一系列网络协议的总称，这些协议的目的是使得计算机之间可以进行信息交换，

2. TCP/IP的五层架构模型

   应用层：直接为用户的应用进程提供服务
   
   传输层：负责为两个主机之间的进程提供服务，具有复用和分用的功能，主要使用 TCP 和 UDP 协议。
   
   ​	复用：多个应用进程可以同时使用下面进程中的服务。
   
   ​	分用：把收集到的信息分别提交给上面应用进程中相应的进程。	
   
   网络层：负责分组交换网上不同主机之间的通信，主要使用 IP 协议。
   
   数据链路层：将网络层下交下来的 IP 数据报组装成帧，在两个相邻节点之间的链路上**透明**的传送帧的数据。
   
   ​	数据链路层透明传送：表示什么样的比特组合都能够通过这个数据链路层。
   
   物理层：透明的传送比特流。

[TCP/IP五层协议体系结构的各层功能](https://blog.csdn.net/zbj18314469395/article/details/79572943)

### 长连接和短连接，优缺点

1. 长连接:是指在一个TCP连接上可以发送多个数据包,但是如果没有数据包发送时,也要双方发检测包以维持这个链连接

   优点：省去较多建立连接和关闭连接的操作,所以比较节省资源和时间

   缺点：长连接如果一直存在的话,第一需要很多探测包的发送来维持这个连接,第二对服务器将是很大的负荷

2. 短连接:当双方需要有数据交互的时候,就建立一个TCP连接,本次交互完成后,就断开这个连接

   优点：短连接则不需要服务器承担太大负荷,，建立的连接都是有用的连接

   缺点：客户端请求频繁,就会在TCP的建立连接和关闭连接上浪费较大的资源和时间

### TCP（传输控制协议）与UDP(用户数据协议)区别总结

1. TCP面向连接，UDP是无连接
2. TCP 是可靠服务，数据无差错，不会丢失。UDP不是可靠服务
3. TCP面向字节流，UDP面向报文
4. TCP连接只能是点到点的;UDP支持一对一，一对多，多对一和多对多的交互通信
5. TCP的逻辑通信信道是全双工的可靠信道，UDP则是不可靠信道

